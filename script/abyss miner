local ReplicatedStorage = game:GetService("ReplicatedStorage")
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
    Name = "Chat GPT Hub",
    LoadingTitle = "Chat GPT Hub",
    LoadingSubtitle = "by ChatGPT",
    ConfigurationSaving = { Enabled = false },
    Discord = { Enabled = false },
    KeySystem = false,
})

local MainTab = Window:CreateTab("Main", 4483362458)

local digRunning = false
local sellRunning = false

-- DIG toggle
MainTab:CreateToggle({
    Name = "Start Dig",
    CurrentValue = false,
    Flag = "DigToggle",
    Callback = function(enabled)
        digRunning = enabled
        if enabled then
            task.spawn(function()
                while digRunning do
                    local success, err = pcall(function()
                        local args = {
                            9999,
                            "Dig",
                            true
                        }
                        ReplicatedStorage:WaitForChild("RemoteEvent"):WaitForChild("HitBox"):FireServer(unpack(args))
                    end)
                    if not success then
                        warn("Dig error:", err)
                    end
                    task.wait(0.1)
                end
            end)
        end
    end,
})

-- SELL toggle (updated with correct path)
MainTab:CreateToggle({
    Name = "Start Sell",
    CurrentValue = false,
    Flag = "SellToggle",
    Callback = function(enabled)
        sellRunning = enabled
        if enabled then
            task.spawn(function()
                while sellRunning do
                    local success, err = pcall(function()
                        local rei = workspace:WaitForChild("Map")
                            :WaitForChild("Layer 1")
                            :WaitForChild("Npcs")
                            :WaitForChild("Rei ' The professer")
                            :WaitForChild("Rei")

                        local dialogue = rei:WaitForChild("HumanoidRootPart")
                            :WaitForChild("Dialogue")

                        local args = { rei, dialogue }
                        ReplicatedStorage:WaitForChild("RemoteEvent")
                            :WaitForChild("SellAllInventory")
                            :FireServer(unpack(args))

                        print("✅ Sell triggered")
                    end)
                    if not success then
                        warn("❗ Sell loop error:", err)
                    end
                    task.wait(1)
                end
            end)
        end
    end,
})
